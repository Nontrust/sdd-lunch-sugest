## 1. 히스토리 데이터 저장소

- [x] 1.1 `data/history.json` 파일 생성 (빈 records 배열: `{"records": []}`)
- [x] 1.2 `lib/storage/index.ts`에 `readHistory`, `writeHistory` 함수 추가

## 2. 히스토리 서비스

- [x] 2.1 `lib/history/service.ts` 생성 - 히스토리 레코드 타입 정의 및 추가/조회 함수 구현
- [x] 2.2 히스토리 조회 시 최근 7일 필터링 및 날짜별 그룹핑 로직 구현
- [x] 2.3 최근 N일 내 추천된 restaurantId 목록 반환 함수 구현

## 3. 스마트 추천 로직

- [x] 3.1 `lib/recommend/service.ts`의 pick 함수 확장 - 스마트 추천 모드 파라미터(smart, 기본 true) 추가
- [x] 3.2 히스토리 기반 중복 방지 필터링 구현 (최근 3일 내 추천 식당 제외)
- [x] 3.3 폴백 로직 구현 - 모든 후보 제외 시 전체 후보에서 랜덤 추천 + 안내 메시지 반환

## 4. API 수정

- [x] 4.1 `GET /api/recommend` 수정 - smart 쿼리 파라미터 지원 및 추천 결과 히스토리 자동 저장
- [x] 4.2 `GET /api/history` 엔드포인트 추가 - 최근 7일 히스토리 조회 API

## 5. UI 구현

- [x] 5.1 `/history` 페이지 생성 - 날짜별 그룹핑된 추천 기록 목록 표시
- [x] 5.2 네비게이션에 "기록" 링크 추가
- [x] 5.3 추천 결과에 폴백 안내 메시지 표시 영역 추가

## 6. 테스트 및 검증

- [x] 6.1 히스토리 저장/조회 동작 확인
- [x] 6.2 스마트 추천 중복 방지 및 폴백 동작 확인
- [x] 6.3 히스토리 페이지 UI 표시 확인
